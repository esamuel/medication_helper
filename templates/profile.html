{% extends "base.html" %}

{% block title %}User Profile{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mb-4">User Profile</h1>
    
    <div class="card">
        <div class="card-body">
            <form method="POST">
                <div class="mb-3">
                    <label for="name" class="form-label">Full Name</label>
                    <input type="text" class="form-control" id="name" name="name" value="{{ profile.name }}" required>
                </div>

                <div class="mb-3">
                    <label for="date_of_birth" class="form-label">Date of Birth</label>
                    <input type="date" class="form-control" id="date_of_birth" name="date_of_birth" 
                           value="{{ profile.date_of_birth.strftime('%Y-%m-%d') if profile.date_of_birth else '' }}" required>
                </div>

                <div class="mb-3">
                    <label for="gender" class="form-label">Gender</label>
                    <select class="form-select" id="gender" name="gender">
                        <option value="Not Specified" {% if profile.gender == 'Not Specified' %}selected{% endif %}>Prefer not to say</option>
                        <option value="Male" {% if profile.gender == 'Male' %}selected{% endif %}>Male</option>
                        <option value="Female" {% if profile.gender == 'Female' %}selected{% endif %}>Female</option>
                        <option value="Other" {% if profile.gender == 'Other' %}selected{% endif %}>Other</option>
                    </select>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="height" class="form-label">Height (cm)</label>
                            <input type="number" step="0.1" class="form-control" id="height" name="height" 
                                   value="{{ '%.1f' % profile.height if profile.height else '' }}">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="weight" class="form-label">Weight (kg)</label>
                            <input type="number" step="0.1" class="form-control" id="weight" name="weight" 
                                   value="{{ '%.1f' % profile.weight if profile.weight else '' }}">
                        </div>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="blood_type" class="form-label">Blood Type</label>
                    <select class="form-select" id="blood_type" name="blood_type">
                        <option value="" {% if not profile.blood_type %}selected{% endif %}>Unknown</option>
                        <option value="A+" {% if profile.blood_type == 'A+' %}selected{% endif %}>A+</option>
                        <option value="A-" {% if profile.blood_type == 'A-' %}selected{% endif %}>A-</option>
                        <option value="B+" {% if profile.blood_type == 'B+' %}selected{% endif %}>B+</option>
                        <option value="B-" {% if profile.blood_type == 'B-' %}selected{% endif %}>B-</option>
                        <option value="AB+" {% if profile.blood_type == 'AB+' %}selected{% endif %}>AB+</option>
                        <option value="AB-" {% if profile.blood_type == 'AB-' %}selected{% endif %}>AB-</option>
                        <option value="O+" {% if profile.blood_type == 'O+' %}selected{% endif %}>O+</option>
                        <option value="O-" {% if profile.blood_type == 'O-' %}selected{% endif %}>O-</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="allergies" class="form-label">Allergies</label>
                    <textarea class="form-control" id="allergies" name="allergies" rows="3">{{ profile.allergies }}</textarea>
                    <div class="form-text">List any allergies, including medications, foods, or other substances.</div>
                </div>

                <div class="mb-3">
                    <label for="medical_conditions" class="form-label">Medical Conditions</label>
                    <textarea class="form-control" id="medical_conditions" name="medical_conditions" rows="3">{{ profile.medical_conditions }}</textarea>
                    <div class="form-text">List any chronic conditions, past surgeries, or other relevant medical history.</div>
                </div>

                <div class="text-end">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
